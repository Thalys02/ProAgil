{"version":3,"sources":["webpack://ngxBr/webpack/universalModuleDefinition","webpack://ngxBr/webpack/bootstrap","webpack://ngxBr/external {\"root\":[\"ng\",\"core\"],\"commonjs\":\"@angular/core\",\"commonjs2\":\"@angular/core\",\"amd\":\"@angular/core\"}","webpack://ngxBr/./src/currency-mask.directive.ts","webpack://ngxBr/external {\"root\":[\"ng\",\"forms\"],\"commonjs\":\"@angular/forms\",\"commonjs2\":\"@angular/forms\",\"amd\":\"@angular/forms\"}","webpack://ngxBr/./src/currency-mask.config.ts","webpack://ngxBr/./index.ts","webpack://ngxBr/./src/input.handler.ts","webpack://ngxBr/./src/input.service.ts","webpack://ngxBr/./src/input.manager.ts","webpack://ngxBr/./src/currency-mask.module.ts","webpack://ngxBr/external {\"root\":[\"ng\",\"common\"],\"commonjs\":\"@angular/common\",\"commonjs2\":\"@angular/common\",\"amd\":\"@angular/common\"}"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__9__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CURRENCYMASKDIRECTIVE_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CurrencyMaskDirective","multi","currencyMaskConfig","elementRef","keyValueDiffers","options","optionsTemplate","align","allowNegative","allowZero","decimal","precision","prefix","suffix","thousands","nullable","this","keyValueDiffer","find","ngAfterViewInit","nativeElement","style","textAlign","ngDoCheck","diff","inputHandler","updateOptions","assign","ngOnInit","InputHandler","handleBlur","event","getOnModelTouched","apply","handleCut","isChromeAndroid","handleInput","handleKeydown","handleKeypress","handlePaste","test","navigator","userAgent","registerOnChange","callbackFunction","setOnModelChange","registerOnTouched","setOnModelTouched","setDisabledState","disabled","writeValue","setValue","Input","HostListener","Directive","selector","providers","Optional","Inject","CURRENCY_MASK_CONFIG","ElementRef","KeyValueDiffers","InjectionToken","htmlInputElement","inputService","InputService","setTimeout","updateFieldValue","onModelChange","keyCode","rawValue","charCodeAt","length","rawValueLength","rawValueSelectionEnd","inputSelection","selectionEnd","storedRawValueLength","storedRawValue","Math","abs","removeNumber","changeToPositive","changeToNegative","canInputMoreNumbers","addNumber","setCursorPosition","which","charCode","preventDefault","selectionRangeLength","selectionStart","prefixLength","clearValue","isNullable","ctrlKey","undefined","getOnModelChange","onModelTouched","target","setSelectionRange","PER_AR_NUMBER","Map","inputManager","InputManager","initialize","set","applyMask","keyChar","String","fromCharCode","substring","isNumber","onlyNumbers","Number","toFixed","replace","integerPart","slice","startsWith","newRawValue","decimalPart","repeat","isZero","parseInt","indexOf","clearMask","RegExp","forEach","val","re","parseFloat","charAt","move","substr","match","updateValueAndCursor","setCursorAt","position","focus","createTextRange","textRange","collapse","moveEnd","moveStart","select","oldLength","haventReachedMaxLength","maxLength","haveNumberSelected","startWithZero","range","document","selection","createRange","parentElement","lenght","normalizedValue","startRange","moveToBookmark","getBookmark","endRange","compareEndPoints","split","_storedRawValue","NgxCurrencyModule","forRoot","config","ngModule","useValue","NgModule","imports","CommonModule","FormsModule","declarations"],"mappings":"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","file":"ngx-currency.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"@angular/forms\"), require(\"@angular/common\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"@angular/forms\", \"@angular/common\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ngxBr\"] = factory(require(\"@angular/core\"), require(\"@angular/forms\"), require(\"@angular/common\"));\n\telse\n\t\troot[\"ngxBr\"] = factory(root[\"ng\"][\"core\"], root[\"ng\"][\"forms\"], root[\"ng\"][\"common\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import {\n  AfterViewInit,\n  Directive,\n  DoCheck,\n  ElementRef,\n  forwardRef,\n  HostListener,\n  Inject,\n  KeyValueDiffer,\n  KeyValueDiffers,\n  Input,\n  OnInit,\n  Optional\n} from \"@angular/core\";\n\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from \"@angular/forms\";\nimport {CurrencyMaskConfig, CURRENCY_MASK_CONFIG} from \"./currency-mask.config\";\nimport {InputHandler} from \"./input.handler\";\n\nexport const CURRENCYMASKDIRECTIVE_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => CurrencyMaskDirective),\n  multi: true,\n};\n\n@Directive({\n    selector: \"[currencyMask]\",\n    providers: [CURRENCYMASKDIRECTIVE_VALUE_ACCESSOR]\n})\nexport class CurrencyMaskDirective implements AfterViewInit, ControlValueAccessor, DoCheck, OnInit {\n\n  @Input() options: Partial<CurrencyMaskConfig> = {};\n\n  public inputHandler: InputHandler;\n  public keyValueDiffer: KeyValueDiffer<any, any>;\n\n  public optionsTemplate = {\n      align: \"right\",\n      allowNegative: true,\n      allowZero: true,\n      decimal: \".\",\n      precision: 2,\n      prefix: \"$ \",\n      suffix: \"\",\n      thousands: \",\",\n      nullable: false\n  };\n\n  constructor(@Optional() @Inject(CURRENCY_MASK_CONFIG) private currencyMaskConfig: CurrencyMaskConfig,\n                                                        private elementRef: ElementRef,\n                                                        private keyValueDiffers: KeyValueDiffers) {\n    if (currencyMaskConfig) {\n        this.optionsTemplate = currencyMaskConfig;\n    }\n\n    this.keyValueDiffer = keyValueDiffers.find({}).create();\n  }\n\n  ngAfterViewInit() {\n    this.elementRef.nativeElement.style.textAlign = this.options && this.options.align ? this.options.align : this.optionsTemplate.align;\n  }\n\n  ngDoCheck() {\n    if (this.keyValueDiffer.diff(this.options)) {\n      this.elementRef.nativeElement.style.textAlign = this.options.align ? this.options.align : this.optionsTemplate.align;\n      this.inputHandler.updateOptions((<any>Object).assign({}, this.optionsTemplate, this.options));\n    }\n  }\n\n  ngOnInit() {\n    this.inputHandler = new InputHandler(this.elementRef.nativeElement, (<any>Object).assign({}, this.optionsTemplate, this.options));\n  }\n\n  @HostListener(\"blur\", [\"$event\"])\n  handleBlur(event: any) {\n    this.inputHandler.getOnModelTouched().apply(event);\n  }\n\n  @HostListener(\"cut\", [\"$event\"])\n  handleCut(event: any) {\n    if (!this.isChromeAndroid()) {\n      this.inputHandler.handleCut(event);\n    }\n  }\n\n  @HostListener(\"input\", [\"$event\"])\n  handleInput(event: any) {\n    if (this.isChromeAndroid()) {\n      this.inputHandler.handleInput(event);\n    }\n  }\n\n  @HostListener(\"keydown\", [\"$event\"])\n  handleKeydown(event: any) {\n    if (!this.isChromeAndroid()) {\n      this.inputHandler.handleKeydown(event);\n    }\n  }\n\n  @HostListener(\"keypress\", [\"$event\"])\n  handleKeypress(event: any) {\n    if (!this.isChromeAndroid()) {\n      this.inputHandler.handleKeypress(event);\n    }\n  }\n\n  @HostListener(\"paste\", [\"$event\"])\n  handlePaste(event: any) {\n    if (!this.isChromeAndroid()) {\n      this.inputHandler.handlePaste(event);\n    }\n  }\n\n  isChromeAndroid(): boolean {\n    return /chrome/i.test(navigator.userAgent) && /android/i.test(navigator.userAgent);\n  }\n\n  registerOnChange(callbackFunction: Function): void {\n    this.inputHandler.setOnModelChange(callbackFunction);\n  }\n\n  registerOnTouched(callbackFunction: Function): void {\n    this.inputHandler.setOnModelTouched(callbackFunction);\n  }\n\n  setDisabledState(value: boolean): void {\n    this.elementRef.nativeElement.disabled = value;\n  }\n\n  writeValue(value: number): void {\n    this.inputHandler.setValue(value);\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {InjectionToken} from \"@angular/core\";\n\nexport interface CurrencyMaskConfig {\n  align: string;\n  allowNegative: boolean;\n  allowZero: boolean;\n  decimal: string;\n  precision: number;\n  prefix: string;\n  suffix: string;\n  thousands: string;\n  nullable: boolean;\n}\n\nexport let CURRENCY_MASK_CONFIG = new InjectionToken<CurrencyMaskConfig>(\"currency.mask.config\");\n","export * from './src/currency-mask.directive';\nexport * from './src/currency-mask.module';\nexport { CurrencyMaskConfig } from './src/currency-mask.config';\n","import {InputService} from \"./input.service\";\n\nexport class InputHandler {\n\n    private inputService: InputService;\n    private onModelChange: Function;\n    private onModelTouched: Function;\n\n    constructor(htmlInputElement: HTMLInputElement, options: any) {\n        this.inputService = new InputService(htmlInputElement, options);\n    }\n\n    handleCut(event: any): void {\n        setTimeout(() => {\n            this.inputService.updateFieldValue();\n            this.setValue(this.inputService.value);\n            this.onModelChange(this.inputService.value);\n        }, 0);\n    }\n\n    handleInput(event: any): void {\n        let keyCode = this.inputService.rawValue.charCodeAt(this.inputService.rawValue.length - 1);\n        let rawValueLength = this.inputService.rawValue.length;\n        let rawValueSelectionEnd = this.inputService.inputSelection.selectionEnd;\n        let storedRawValueLength = this.inputService.storedRawValue.length;\n        this.inputService.rawValue = this.inputService.storedRawValue;\n\n        if (rawValueLength != rawValueSelectionEnd || Math.abs(rawValueLength - storedRawValueLength) != 1) {\n            this.setCursorPosition(event);\n            return;\n        }\n\n        if (rawValueLength < storedRawValueLength) {\n            this.inputService.removeNumber(8);\n        }\n\n        if (rawValueLength > storedRawValueLength) {\n            switch (keyCode) {\n                case 43:\n                    this.inputService.changeToPositive();\n                    break;\n                case 45:\n                    this.inputService.changeToNegative();\n                    break;\n                default:\n                    if (!this.inputService.canInputMoreNumbers) {\n                        return;\n                    }\n\n                    this.inputService.addNumber(keyCode);\n            }\n        }\n\n        this.setCursorPosition(event);\n        this.onModelChange(this.inputService.value);\n    }\n\n    handleKeydown(event: any): void {\n        let keyCode = event.which || event.charCode || event.keyCode;\n\n        if (keyCode == 8 || keyCode == 46 || keyCode == 63272) {\n            event.preventDefault();\n            let selectionRangeLength = Math.abs(this.inputService.inputSelection.selectionEnd - this.inputService.inputSelection.selectionStart);\n\n            if (selectionRangeLength == 0) {\n                this.inputService.removeNumber(keyCode);\n                this.onModelChange(this.inputService.value);\n            }\n\n            if (selectionRangeLength >= (this.inputService.rawValue.length - this.inputService.prefixLength())) {\n                this.clearValue();\n            }\n        }\n    }\n\n    clearValue() {\n        this.setValue(this.inputService.isNullable() ? null : 0);\n        this.onModelChange(this.inputService.value);\n    }\n\n    handleKeypress(event: any): void {\n        let keyCode = event.which || event.charCode || event.keyCode;\n\n        if (keyCode === 97 && event.ctrlKey) {\n            return;\n        }\n\n        switch (keyCode) {\n            case undefined:\n            case 9:\n            case 13:\n            case 37:\n            case 39:\n                return;\n            case 43:\n                this.inputService.changeToPositive();\n                break;\n            case 45:\n                this.inputService.changeToNegative();\n                break;\n            default:\n                if (this.inputService.canInputMoreNumbers) {\n                    let selectionRangeLength = Math.abs(this.inputService.inputSelection.selectionEnd - this.inputService.inputSelection.selectionStart);\n\n                    if (selectionRangeLength == this.inputService.rawValue.length) {\n                        this.setValue(0);\n                    }\n\n                    this.inputService.addNumber(keyCode);\n                }\n        }\n\n        event.preventDefault();\n        this.onModelChange(this.inputService.value);\n    }\n\n    handlePaste(event: any): void {\n        setTimeout(() => {\n            this.inputService.updateFieldValue();\n            this.setValue(this.inputService.value);\n            this.onModelChange(this.inputService.value);\n        }, 1);\n    }\n\n    updateOptions(options: any): void {\n        this.inputService.updateOptions(options);\n    }\n\n    getOnModelChange(): Function {\n        return this.onModelChange;\n    }\n\n    setOnModelChange(callbackFunction: Function): void {\n        this.onModelChange = callbackFunction;\n    }\n\n    getOnModelTouched(): Function {\n        return this.onModelTouched;\n    }\n\n    setOnModelTouched(callbackFunction: Function) {\n        this.onModelTouched = callbackFunction;\n    }\n\n    setValue(value: number): void {\n        this.inputService.value = value;\n    }\n\n    private setCursorPosition(event: any): void {\n        setTimeout(function () {\n            event.target.setSelectionRange(event.target.value.length, event.target.value.length);\n        }, 0);\n    }\n}\n","import {InputManager} from \"./input.manager\";\nimport {CurrencyMaskConfig} from \"./currency-mask.config\";\n\n\nexport class InputService {\n    PER_AR_NUMBER: Map<string, string> = new Map<string, string>();\n\n    initialize() {\n        this.PER_AR_NUMBER.set(\"\\u06F0\", \"0\");\n        this.PER_AR_NUMBER.set(\"\\u06F1\", \"1\");\n        this.PER_AR_NUMBER.set(\"\\u06F2\", \"2\");\n        this.PER_AR_NUMBER.set(\"\\u06F3\", \"3\");\n        this.PER_AR_NUMBER.set(\"\\u06F4\", \"4\");\n        this.PER_AR_NUMBER.set(\"\\u06F5\", \"5\");\n        this.PER_AR_NUMBER.set(\"\\u06F6\", \"6\");\n        this.PER_AR_NUMBER.set(\"\\u06F7\", \"7\");\n        this.PER_AR_NUMBER.set(\"\\u06F8\", \"8\");\n        this.PER_AR_NUMBER.set(\"\\u06F9\", \"9\");\n\n        this.PER_AR_NUMBER.set(\"\\u0660\", \"0\");\n        this.PER_AR_NUMBER.set(\"\\u0661\", \"1\");\n        this.PER_AR_NUMBER.set(\"\\u0662\", \"2\");\n        this.PER_AR_NUMBER.set(\"\\u0663\", \"3\");\n        this.PER_AR_NUMBER.set(\"\\u0664\", \"4\");\n        this.PER_AR_NUMBER.set(\"\\u0665\", \"5\");\n        this.PER_AR_NUMBER.set(\"\\u0666\", \"6\");\n        this.PER_AR_NUMBER.set(\"\\u0667\", \"7\");\n        this.PER_AR_NUMBER.set(\"\\u0668\", \"8\");\n        this.PER_AR_NUMBER.set(\"\\u0669\", \"9\");\n    }\n\n    inputManager: InputManager;\n\n    constructor(private htmlInputElement: any, private options: CurrencyMaskConfig) {\n        this.inputManager = new InputManager(htmlInputElement);\n        this.initialize()\n    }\n\n    addNumber(keyCode: number): void {\n        if (!this.rawValue) {\n            this.rawValue = this.applyMask(false, \"0\");\n        }\n\n        let keyChar = String.fromCharCode(keyCode);\n        let selectionStart = this.inputSelection.selectionStart;\n        let selectionEnd = this.inputSelection.selectionEnd;\n        this.rawValue = this.rawValue.substring(0, selectionStart) + keyChar + this.rawValue.substring(selectionEnd, this.rawValue.length);\n        this.updateFieldValue(selectionStart + 1);\n    }\n\n    applyMask(isNumber: boolean, rawValue: string): string {\n        let {allowNegative, decimal, precision, prefix, suffix, thousands, nullable} = this.options;\n        rawValue = isNumber ? new Number(rawValue).toFixed(precision) : rawValue;\n        let onlyNumbers = rawValue.replace(/[^0-9\\u0660-\\u0669\\u06F0-\\u06F9]/g, \"\");\n\n        if (!onlyNumbers) {\n            return \"\";\n        }\n\n        let integerPart = onlyNumbers.slice(0, onlyNumbers.length - precision)\n          .replace(/^\\u0660*/g, \"\")\n          .replace(/^\\u06F0*/g, \"\")\n          .replace(/^0*/g, \"\")\n          .replace(/\\B(?=([0-9\\u0660-\\u0669\\u06F0-\\u06F9]{3})+(?![0-9\\u0660-\\u0669\\u06F0-\\u06F9]))/g, thousands);\n\n        if (thousands && integerPart.startsWith(thousands)) {\n            integerPart = integerPart.substring(1);\n        }\n\n\n        if (integerPart == \"\") {\n            integerPart = \"0\";\n        }\n\n        let newRawValue = integerPart;\n        let decimalPart = onlyNumbers.slice(onlyNumbers.length - precision);\n\n        if (precision > 0) {\n            if (newRawValue == \"0\" && decimalPart.length < precision) {\n                newRawValue += decimal + \"0\".repeat(precision - 1) + decimalPart;\n            } else {\n                newRawValue += decimal + decimalPart;\n            }\n        }\n\n        let isZero = parseInt(integerPart) == 0 && (parseInt(decimalPart) == 0 || decimalPart == \"\");\n        let operator = (rawValue.indexOf(\"-\") > -1 && allowNegative && !isZero) ? \"-\" : \"\";\n        return operator + prefix + newRawValue + suffix;\n    }\n\n    clearMask(rawValue: string): number {\n        if (this.isNullable() && rawValue === \"\")\n            return null;\n\n        let value = (rawValue || \"0\").replace(this.options.prefix, \"\").replace(this.options.suffix, \"\");\n\n        if (this.options.thousands) {\n            value = value.replace(new RegExp(\"\\\\\" + this.options.thousands, \"g\"), \"\");\n        }\n\n        if (this.options.decimal) {\n            value = value.replace(this.options.decimal, \".\");\n        }\n\n        this.PER_AR_NUMBER.forEach((val: string, key: string) => {\n            const re = new RegExp(key, \"g\");\n            value = value.replace(re, val);\n        });\n        return parseFloat(value);\n    }\n\n    changeToNegative(): void {\n        if (this.options.allowNegative && this.rawValue != \"\" && this.rawValue.charAt(0) != \"-\" && this.value != 0) {\n            this.rawValue = \"-\" + this.rawValue;\n        }\n    }\n\n    changeToPositive(): void {\n        this.rawValue = this.rawValue.replace(\"-\", \"\");\n    }\n\n    removeNumber(keyCode: number): void {\n        if (this.isNullable() && this.value == 0) {\n            this.rawValue = null;\n            return;\n        }\n\n        let selectionEnd = this.inputSelection.selectionEnd;\n        let selectionStart = this.inputSelection.selectionStart;\n\n        if (selectionStart > this.rawValue.length - this.options.suffix.length) {\n            selectionEnd = this.rawValue.length - this.options.suffix.length;\n            selectionStart = this.rawValue.length - this.options.suffix.length;\n        }\n\n    let move = this.rawValue.substr(selectionStart - 1, 1).match(/\\d/) ? 0 : -1;\n    if ((\n          keyCode == 8 &&\n          selectionStart - 1 === 0 &&\n          !(this.rawValue.substr(selectionStart, 1).match(/\\d/))\n        ) ||\n        (\n          (keyCode == 46 || keyCode == 63272) &&\n          selectionStart === 0 &&\n          !(this.rawValue.substr(selectionStart + 1, 1).match(/\\d/))\n        )\n    ) {\n      move = 1;\n    };\n    selectionEnd = keyCode == 46 || keyCode == 63272 ? selectionEnd + 1 : selectionEnd;\n    selectionStart = keyCode == 8 ? selectionStart - 1 : selectionStart;\n    this.rawValue = this.rawValue.substring(0, selectionStart) + this.rawValue.substring(selectionEnd, this.rawValue.length);\n    this.updateFieldValue(selectionStart + move);\n  }\n\n    updateFieldValue(selectionStart?: number): void {\n        let newRawValue = this.applyMask(false, this.rawValue || \"\");\n        selectionStart = selectionStart == undefined ? this.rawValue.length : selectionStart;\n        this.inputManager.updateValueAndCursor(newRawValue, this.rawValue.length, selectionStart);\n    }\n\n    updateOptions(options: any): void {\n        let value: number = this.value;\n        this.options = options;\n        this.value = value;\n    }\n\n    prefixLength(): any {\n        return this.options.prefix.length;\n    }\n\n    isNullable() {\n        return this.options.nullable;\n    }\n\n    get canInputMoreNumbers(): boolean {\n        return this.inputManager.canInputMoreNumbers;\n    }\n\n    get inputSelection(): any {\n        return this.inputManager.inputSelection;\n    }\n\n    get rawValue(): string {\n        return this.inputManager.rawValue;\n    }\n\n    set rawValue(value: string) {\n        this.inputManager.rawValue = value;\n    }\n\n    get storedRawValue(): string {\n        return this.inputManager.storedRawValue;\n    }\n\n    get value(): number {\n        return this.clearMask(this.rawValue);\n    }\n\n    set value(value: number) {\n        this.rawValue = this.applyMask(true, \"\" + value);\n    }\n}\n","export class InputManager {\n\n    private _storedRawValue: string;\n\n    constructor(private htmlInputElement: any) {\n    }\n\n    setCursorAt(position: number): void {\n        if (this.htmlInputElement.setSelectionRange) {\n            this.htmlInputElement.focus();\n            this.htmlInputElement.setSelectionRange(position, position);\n        } else if (this.htmlInputElement.createTextRange) {\n            let textRange = this.htmlInputElement.createTextRange();\n            textRange.collapse(true);\n            textRange.moveEnd(\"character\", position);\n            textRange.moveStart(\"character\", position);\n            textRange.select();\n        }\n    }\n\n    updateValueAndCursor(newRawValue: string, oldLength: number, selectionStart: number): void {\n        this.rawValue = newRawValue;\n        let newLength = newRawValue.length;\n        selectionStart = selectionStart - (oldLength - newLength);\n        this.setCursorAt(selectionStart);\n    }\n\n    get canInputMoreNumbers(): boolean {\n        let haventReachedMaxLength = !(this.rawValue.length >= this.htmlInputElement.maxLength && this.htmlInputElement.maxLength >= 0);\n        let selectionStart = this.inputSelection.selectionStart;\n        let selectionEnd = this.inputSelection.selectionEnd;\n        let haveNumberSelected = !!(selectionStart != selectionEnd &&\n                                    this.htmlInputElement.value.substring(selectionStart, selectionEnd).match(/[^0-9\\u0660-\\u0669\\u06F0-\\u06F9]/));\n        let startWithZero = (this.htmlInputElement.value.substring(0, 1) == \"0\");\n        return haventReachedMaxLength || haveNumberSelected || startWithZero;\n    }\n\n    get inputSelection(): any {\n        let selectionStart = 0;\n        let selectionEnd = 0;\n\n        if (typeof this.htmlInputElement.selectionStart == \"number\" && typeof this.htmlInputElement.selectionEnd == \"number\") {\n            selectionStart = this.htmlInputElement.selectionStart;\n            selectionEnd = this.htmlInputElement.selectionEnd;\n        } else {\n            let range = (<any>document).selection.createRange();\n\n            if (range && range.parentElement() == this.htmlInputElement) {\n                let lenght = this.htmlInputElement.value.length;\n                let normalizedValue = this.htmlInputElement.value.replace(/\\r\\n/g, \"\\n\");\n                let startRange = this.htmlInputElement.createTextRange();\n                startRange.moveToBookmark(range.getBookmark());\n                let endRange = this.htmlInputElement.createTextRange();\n                endRange.collapse(false);\n\n                if (startRange.compareEndPoints(\"StartToEnd\", endRange) > -1) {\n                    selectionStart = selectionEnd = lenght;\n                } else {\n                    selectionStart = -startRange.moveStart(\"character\", -lenght);\n                    selectionStart += normalizedValue.slice(0, selectionStart).split(\"\\n\").length - 1;\n\n                    if (startRange.compareEndPoints(\"EndToEnd\", endRange) > -1) {\n                        selectionEnd = lenght;\n                    } else {\n                        selectionEnd = -startRange.moveEnd(\"character\", -lenght);\n                        selectionEnd += normalizedValue.slice(0, selectionEnd).split(\"\\n\").length - 1;\n                    }\n                }\n            }\n        }\n\n        return {\n            selectionStart: selectionStart,\n            selectionEnd: selectionEnd\n        };\n    }\n\n    get rawValue(): string {\n        return this.htmlInputElement && this.htmlInputElement.value;\n    }\n\n    set rawValue(value: string) {\n        this._storedRawValue = value;\n\n        if (this.htmlInputElement) {\n            this.htmlInputElement.value = value;\n        }\n    }\n\n    get storedRawValue(): string {\n        return this._storedRawValue;\n    }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {CurrencyMaskDirective} from \"./currency-mask.directive\";\nimport {CURRENCY_MASK_CONFIG, CurrencyMaskConfig} from \"./currency-mask.config\";\n\n@NgModule({\n  imports: [ CommonModule, FormsModule ],\n  declarations: [ CurrencyMaskDirective ],\n  exports: [ CurrencyMaskDirective ]\n})\nexport class NgxCurrencyModule {\n  static forRoot(config: CurrencyMaskConfig): ModuleWithProviders {\n    return {\n      ngModule: NgxCurrencyModule,\n      providers: [{\n        provide: CURRENCY_MASK_CONFIG,\n        useValue: config,\n      }]\n    }\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;"],"sourceRoot":""}